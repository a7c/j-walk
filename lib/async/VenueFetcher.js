Object.defineProperty(exports,"__esModule",{value:true});exports.fetchVenues=undefined;var _this=this;var _config=require('root/config.json');var _config2=_interopRequireDefault(_config);var _Types=require('src/entities/Types');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var fetchVenues=exports.fetchVenues=function fetchVenues(lat,lng,radius){var apiUrl,clientId,clientSecret,version,_response,responseJson,_venues;return regeneratorRuntime.async(function fetchVenues$(_context){while(1){switch(_context.prev=_context.next){case 0:apiUrl='https://api.foursquare.com/v2/venues/search?';clientId=_config2.default.foursquareClientId;clientSecret=_config2.default.foursquareClientSecret;version='20170306';_context.prev=4;_context.next=7;return regeneratorRuntime.awrap(fetch(apiUrl+'intent=browse&radius='+radius+'&ll='+lat+','+lng+'&limit=8&client_id='+clientId+'&client_secret='+clientSecret+'&v='+version));case 7:_response=_context.sent;_context.next=10;return regeneratorRuntime.awrap(_response.json());case 10:responseJson=_context.sent;_venues=responseJson.response.venues.reduce(function(acc,venueData){var venue=_processVenue(venueData);if(venue){acc.push(venue);}return acc;},[]);return _context.abrupt('return',_venues);case 15:_context.prev=15;_context.t0=_context['catch'](4);console.error(_context.t0);return _context.abrupt('return',[]);case 19:case'end':return _context.stop();}}},null,_this,[[4,15]]);};var _processVenue=function _processVenue(venueData){if(!venueData.categories||venueData.categories.length===0){return null;}var venue={id:venueData.id,name:venueData.name,lat:venueData.location.lat,lng:venueData.location.lng,category:venueData.categories[0].shortName.toLowerCase(),state:_Types.VenueState.HIDDEN,vocab:null};return venue;};